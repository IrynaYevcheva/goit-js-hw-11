{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#form');\nconst formInput = document.querySelector('#formInput');\nconst gallery = document.querySelector('#gallery');\nconst loadingMessage = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('#gallery a', {\n  showCounter: false,\n});\n\niziToast.settings({\n  close: true,\n  closeOnClick: false,\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: 'white',\n  timeout: 4000,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n  backgroundColor: 'red',\n});\n\nfunction onError() {\n  gallery.innerHTML = '';\n  iziToast.show();\n}\n\nform.addEventListener('submit', fetchImg);\n\nfunction fetchImg(event) {\n  loadingMessage.classList.remove('hidden');\n  event.preventDefault();\n  const searchParams = new URLSearchParams({\n    key: '41535570-7b1028e1c6f1b041bb0744cc1',\n    q: formInput.value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  fetch(`https://pixabay.com/api/?${searchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(images => {\n      setTimeout(() => {\n        loadingMessage.classList.add('hidden');\n        if (images.hits.length === 0) {\n          return onError();\n        }\n        renderImages(images.hits);\n      }, 1000);\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      form.reset();\n    });\n}\n\nfunction renderImages(images) {\n  gallery.innerHTML = images.reduce(\n    (\n      html,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      html +\n      `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"image-info\">\n          <div>Likes:<span>${likes}</span></div>\n          <div>Views:<span>${views}</span></div>\n          <div>Comments:<span>${comments}</span></div>\n          <div>Downloads:<span>${downloads}</span></div>\n        </div>\n      </li>\n      `,\n    ''\n  );\n  lightbox.refresh();\n}\n"],"names":["form","formInput","gallery","loadingMessage","lightbox","SimpleLightbox","iziToast","onError","fetchImg","event","searchParams","response","images","renderImages","error","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,SAAS,EAEvD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,YAAa,EACf,CAAC,EAEDC,EAAS,SAAS,CAChB,MAAO,GACP,aAAc,GACd,QACE,2EACF,aAAc,QACd,QAAS,IACT,aAAc,UACd,cAAe,WACf,SAAU,WACV,gBAAiB,KACnB,CAAC,EAED,SAASC,GAAU,CACjBL,EAAQ,UAAY,GACpBI,EAAS,KAAI,CACf,CAEAN,EAAK,iBAAiB,SAAUQ,CAAQ,EAExC,SAASA,EAASC,EAAO,CACvBN,EAAe,UAAU,OAAO,QAAQ,EACxCM,EAAM,eAAc,EACpB,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGT,EAAU,MACb,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,MAAM,4BAA4BS,GAAc,EAC7C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAU,CACd,WAAW,IAAM,CAEf,GADAT,EAAe,UAAU,IAAI,QAAQ,EACjCS,EAAO,KAAK,SAAW,EACzB,OAAOL,EAAO,EAEhBM,EAAaD,EAAO,IAAI,CACzB,EAAE,GAAI,CACb,CAAK,EACA,MAAME,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbd,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASa,EAAaD,EAAQ,CAC5BV,EAAQ,UAAYU,EAAO,OACzB,CACEG,EACA,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAExEP,EACA;AAAA;AAAA,mBAEaE;AAAA,0CACuBD,WAAsBE;AAAA;AAAA;AAAA,6BAGnCC;AAAA,6BACAC;AAAA,gCACGC;AAAA,iCACCC;AAAA;AAAA;AAAA,QAI7B,EACJ,EACElB,EAAS,QAAO,CAClB"}